# src/main/resources/application.yml
# Common configuration shared across ALL environments

spring:
  application:
    name: memory-keeper
    cache:
      type: none

  profiles:
    active: dev  # Default to production, override with -Dspring.profiles.active=dev for development

  # JPA Configuration (common for all environments)
  jpa:
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        use_sql_comments: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true

  flyway:
    enabled: true # Enabled by default for all environments
    validate-on-migrate: true # This is the safe default
    baseline-on-migrate: true

  # Cache Configuration
#  cache:
#    type: redis
#    redis:
#      time-to-live: 3600000  # 1 hour

  # File Upload
  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB

  # Mail Configuration (Optional)
  mail:
    host: smtp.gmail.com
    port: 587
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true

# Server Configuration
server:
  port: 8080
  error:
    include-message: always
    include-binding-errors: always

# JWT Configuration
jwt:
  expiration: 86400000  # 24 hours

# AI Services (Common URLs and Models)
ai:
  groq:
    api-url: https://api.groq.com/openai/v1/chat/completions
    model: llama-3.3-70b-versatile

  huggingface:
    api-url: https://api-inference.huggingface.co/models

  replicate:
    api-url: https://api.replicate.com/v1
  stabilityai:
    api-url: https://api.stability.ai/v2beta/stable-image/generate/core
  elevenlabs:
    api-url: https://api.elevenlabs.io/v1

  assemblyai:
    api-url: https://api.assemblyai.com/v2
#  tts:
#    api-url: https://api.voicerss.org
# CORS
cors:
  allowed-origins: ${CORS_ORIGINS:http://localhost:5173,https://memory-keeper-ai.vercel.app}

# OpenAPI/Swagger
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true

# Logging
logging:
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"